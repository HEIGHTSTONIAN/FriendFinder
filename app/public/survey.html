<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Friend Finder</title>
    <!--bootstrap css -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-2.2.3.min.js" integrity="sha256-a23g1Nt4dtEYOj7bR+vTu7+T8VP13humZFBJNIYoEJo=" crossorigin="anonymous"></script>
    <!-- bootstrap js -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
</head>

<body>
    <!-- Modal
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div> -->
    <div class="container">
        <h1>
          Friend Finder survey
        </h1>
        <p>Take the survey to find your new friend.</p>
        <hr>
        <h3>
            <strong>First we need a little information about you.</strong>
        <h3>
        <h4>
            What's your name? (Required)
        </h4>
        <input id="name" type="text" name="FirstName" value="Mickey"><br>
        <h4>
            What do you look like? (Required)
        </h4>
        <input id="photo" type="text" name="Photo Link" value="http://Mugshothere.jpg"><br>

        <h3><strong>First, about ice cream...</strong></h3>
        <h4>You love ice cream.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q0">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <h3><strong>Second, about playing sports...</strong></h3>
        <h4>You love playing sports.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q1">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <h3><strong>Third, about video games...</strong></h3>
        <h4>You love to play video games.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q2">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <h3><strong>Fourth, about new music...</strong></h3>
        <h4>You love enjoying new music.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q3">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <h3><strong>Fifth, about dancing...</strong></h3>
        <h4>You love dancing.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q4">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <h3><strong>Sixth, about coffee...</strong></h3>
        <h4>You love enjoying coffee.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q5">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <h3><strong>Seventh, about new driving...</strong></h3>
        <h4>You love enjoying driving.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q6">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <h3><strong>Eighth, about surprises...</strong></h3>
        <h4>You love surprises.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q7">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <h3><strong>Ninth, about Newman...</strong></h3>
        <h4>You love seeing Newman.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q8">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <h3><strong>Tenth, about dating...</strong></h3>
        <h4>You love dating new people.</h4>
        <p>
            (1 = Totally Disagree, 5 = Totally Agree)
        </p>
        <select id="q9">
            <option>1</option>
            <option>2</option>
            <option>3</option>
            <option>4</option>
            <option>5</option>
        </select>
        <br>
        <hr>
        <button type="button" id='submit' class="btn btn-success btn-medium">Submit</button>
    </div>
    <!-- The Modal -->
    <div id="modal">
      <h1 id="modalText"></h1>
      <span class="glyphicon glyphicon-remove"></span>
      <div class="modal-content">
         <span class="close">&times;</span>
         <img id='modalImage'></img>

      </div>
    </div>
</body>
<style>
  #modal {
    display: none;
    color: black;
    border: 5px brown solid;
    position: absolute;
    z-index: 99;
    transform: translate(-50%,50%);
    top: 50%;
    left: 50%;
    border-radius: 20px;
    background-color: white;
    text-align: center;
    padding: 10px;
    width: 400px;
    height: 250px;
  }

  #modal h1 {
    font-size: 20px;
  }

  .glyphicon-remove {
    position: absolute;
    font-size: 25px;
    right: 0px;
    top: 0px;
    margin: 10px 10px 0px 0px;
  }

  .glyphicon:hover {
    color: red;
    cursor: pointer;
  }

  #modal img {
    margin-left: 25px;
    width: 50%;
    height: auto;
  }

  .hide {
    display: none;
  }

  .show {
    display: block;
  }
</style>

<script type="text/javascript">
var differences = [];
var myScore = [];

var btn = document.getElementById("submit");
var modal = document.querySelector("#modal");
var xButton = document.querySelector(".glyphicon-remove");

$('document').ready(function() {
    $('#submit').on('click', function() {
        var scoresList = [];
        var namesList = [];
        var photoList = [];

        //console.log(scores);
        $.get("/api/friends", "", function(data) {
            console.log(data);
            for (var i = 0; i < data.length; i++) {
                //        data[i].scoresList
                scoresList.push(data[i].scores);
                namesList.push(data[i].name);
                photoList.push(data[i].photo);
            }

            for (var k = 0; k < 10; k++) {
                myScore[k] = parseInt(document.getElementById("q" + k).value);
            }
            console.log(myScore);
            //  console.log('submitclicked');
            //  console.log(scoresList);
            //  console.log('len='+scoresList.length);
            //  console.log(myScore.length);

            //first we need to loop through the big array (scores) holding the individual arrays
            for (i = 0; i < scoresList.length; i++) {

                //setting a variable to collect the differences between the preexisting values and the values we just collected
                var specificDifference = 0;

                console.log(scoresList[i]);
                //then we need to loop through individual arrays in scores
                for (var j = 0; j < scoresList[i].length; j++) {
                    //differences.push(myScore[j]-scores[i][j]);
                    //      console.log("myScore[j] is " + myScore[j] + " - " + "scores [i][j] is " + scoresList[i][j] + " = " + (myScore[j] - scoresList[i][j]));

                    // get the absolute value
                    //      console.log("our positive difference is " + Math.abs(myScore[j] - scoresList[i][j]))

                    //let's add those differences together
                    //      console.log("SpecificDfference is "+specificDifference + " + what we just got " + Math.abs(myScore[j] - scoresList[i][j]));
                    specificDifference += Math.abs(myScore[j] - scoresList[i][j]);
                    //      console.log("updated difference is " + specificDifference)
                    //      console.log("---------------------------")

                    //we want to push the difference to our new array "differences" when the for loop we're inside of is on its last instance
                    if (j === (scoresList[i].length - 1)) {
                        differences.push(specificDifference);
                        //        console.log("push the difference");
                    }
                }
                //  console.log("difference total " + specificDifference);
                //  console.log("***************************");
                //  console.log("this is the end of an array");
                //  console.log("***************************");
            }
            console.log(differences)
            //console.log(Math.min(...differences));


            var lowestNumber = Math.min(...differences);
            console.log(lowestNumber);
            var indexNumberOfOurFriendMatch = differences.indexOf(lowestNumber);
            console.log(indexNumberOfOurFriendMatch);
            console.log(namesList[indexNumberOfOurFriendMatch]);
            console.log(photoList[indexNumberOfOurFriendMatch]);
            console.log("pageloaded");
            modal.setAttribute("class", "show");
            document.querySelector("#modalImage").setAttribute("src", photoList[indexNumberOfOurFriendMatch]);
            document.querySelector("#modalText").innerHTML = namesList[indexNumberOfOurFriendMatch];
            console.log(modal);
        });
    });
    // Get the modal

    xButton.addEventListener("click", function(e) {
      modal.setAttribute("class", "hide");
    });

    // When the user clicks on <span> (x), close the modal


    // When the user clicks anywhere outside of the modal, close it
});
</script>

</html>
